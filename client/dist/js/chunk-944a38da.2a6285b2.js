(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-944a38da"],{"4c16":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row registeration justify-center"},[a("div",{staticClass:"col-shrink content-center"},[a("div",{staticClass:"row content-center",staticStyle:{height:"100%"}},[a("div",{staticClass:"col"},[a("q-card",{staticClass:"my-card2 row justify-center"},[a("div",{staticClass:"col"},[a("div",{staticClass:"row justify-center"},[a("div",{staticClass:"col-shrink"},[a("q-card-section",{staticClass:"title"},[t._v("Edit Profile")])],1)]),a("div",{staticClass:"row justify-center field-margin q-gutter-sm"},[a("div",{staticClass:"col-5"},[a("q-input",{attrs:{outlined:"",label:"Email"},model:{value:t.Email,callback:function(e){t.Email=e},expression:"Email"}})],1),a("div",{staticClass:"col-5"},[a("q-input",{attrs:{outlined:"",label:"Phone Number"},model:{value:t.phone_number,callback:function(e){t.phone_number=e},expression:"phone_number"}})],1)]),a("div",{staticClass:"row justify-center field-margin q-gutter-sm"},[a("div",{staticClass:"col-5"},[a("q-input",{attrs:{outlined:"",label:"First Name"},model:{value:t.first_name,callback:function(e){t.first_name=e},expression:"first_name"}})],1),a("div",{staticClass:"col-5"},[a("q-input",{attrs:{outlined:"",label:"Last Name"},model:{value:t.last_name,callback:function(e){t.last_name=e},expression:"last_name"}})],1)]),a("div",{staticClass:"row justify-center field-margin q-gutter-sm"},[a("div",{staticClass:"col-5"},[a("q-input",{attrs:{outlined:"",mask:"date",rules:["date"],hint:"Birth Date"},scopedSlots:t._u([{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[a("q-popup-proxy",{ref:"qDateProxy",attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-date",{on:{input:function(){return t.$refs.qDateProxy.hide()}},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1)],1)]},proxy:!0}]),model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1),"Student"==t.Role?a("div",{staticClass:"col-5"},[a("q-input",{attrs:{outlined:"",label:"Student ID",type:"text"},model:{value:t.student_id,callback:function(e){t.student_id=e},expression:"student_id"}})],1):t._e()]),a("div",{staticClass:"row justify-center q-gutter-sm",staticStyle:{"margin-bottom":"50px"}},[a("div",{staticClass:"col-7"},[a("q-btn",{staticClass:"full-width",attrs:{color:"primary",label:"Submit Edit"},on:{click:t.submitEdit}})],1),a("div",{staticClass:"col-7"},[a("q-btn",{staticClass:"full-width",attrs:{color:"red-10",label:"Deactivate Profile"},on:{click:t.deactivateClicked}})],1)]),a("q-dialog",{attrs:{persistent:""},model:{value:t.dialogFlag,callback:function(e){t.dialogFlag=e},expression:"dialogFlag"}},[a("q-card",[a("q-card-section",{staticClass:"row items-center"},[a("span",{staticClass:"q-ml-sm"},[t._v("Are you sure you want to delete deactivate your account ?")])]),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Yes",color:"primary"},on:{click:t.deactivatAccount}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"No",color:"primary"},on:{click:function(e){t.dialogFlag=!1}}})],1)],1)],1)],1)])],1)])])])},i=[],n=(a("d3b7"),a("96cf"),a("c151")),r={name:"Account",data:function(){return{Email:"",date:"",phone_number:null,first_name:null,last_name:null,student_id:null,dialogFlag:!1}},computed:{Role:function(){return sessionStorage.getItem("role")}},methods:{fetchUserInfo:function(){var t,e=this;return regeneratorRuntime.async((function(a){while(1)switch(a.prev=a.next){case 0:return t=this.$store.getters.getUserData.id,a.next=3,regeneratorRuntime.awrap(Object(n["a"])().get("/users/getUserInfo/".concat(t)).then((function(t){if("success"==t.data.status){var a=t.data.data;e.first_name=a.First_Name,e.last_name=a.Last_Name,e.date=a.Birth_Date.substring(0,10)+"",e.phone_number=a.phone_number,e.Email=a.Email,a.User_Category,e.student_id=a.student_id}})).catch((function(){e.setUserData})));case 3:case"end":return a.stop()}}),null,this)},setUserData:function(){var t=this.$store.getters.getUserData;this.First_Name=t.First_Name,this.last_name=t.Last_Name,this.data=t.Birth_Date.substring(0,10),this.phone_number=t.phone_number,this.Email=t.Email,t.User_Category,this.student_id=t.student_id},submitEdit:function(){var t=this,e=this.$store.getters.getUserData.id,a={Email:this.Email,phone_number:this.phone_number,First_Name:this.first_name,Last_Name:this.last_name,Birth_Date:this.date};this.student_id&&(a.student_id=this.student_id),this.Email&&this.phone_number&&this.first_name&&this.last_name&&this.date?Object(n["a"])().put("/users/updateProfile/".concat(e),a).then((function(e){"success"==e.data.status&&t.$q.notify({color:"teal",message:"Profile Updated Successfully",position:"top-right",timeout:1e3})})).catch((function(){t.$q.notify({color:"red-10",message:"Error Occured Please Try Again",position:"top-right",timeout:1e3})})):this.$q.notify({color:"red-10",message:"Please Fill all Fields",position:"top-right",timeout:1e3})},deactivateClicked:function(){this.dialogFlag=!0},deactivatAccount:function(){var t=this,e=this.$store.getters.getUserData.id;console.log(e),Object(n["a"])().put("/sessions/deactivate/".concat(e)).then((function(e){"success"==e.data.status&&(t.$q.notify({color:"teal",message:"Profile Deactivated Successfully , Goodbye",position:"top-right",timeout:1e3}),setTimeout((function(){t.$store.commit("clearUserData"),t.$router.push("/")}),2e3))})).catch((function(){t.$q.notify({color:"red-10",message:"Error Occured , Try Again",position:"top-right",timeout:1e3})}))}},created:function(){"undefined"===typeof this.$store.getters.getUserData.First_Name?(this.Email=this.$store.getters.getUserData.email,this.student_id=this.$store.getters.getUserData.email,this.fetchUserInfo()):this.setUserData()}},o=r,l=(a("ffa8"),a("2877")),c=Object(l["a"])(o,s,i,!1,null,"9dd914bc",null);e["default"]=c.exports},a820:function(t,e,a){},ffa8:function(t,e,a){"use strict";var s=a("a820"),i=a.n(s);i.a}}]);
//# sourceMappingURL=chunk-944a38da.2a6285b2.js.map