(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0f1152"],{"9eb2":function(t,e,s){"use strict";s.r(e);var r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"row q-gutter-md"},[s("div",{staticClass:"col-3 q-gutter-md"},[s("q-card",{staticClass:"my-card"},[s("q-card-actions",{staticClass:"row justify-center"},[s("q-btn",{attrs:{color:"green-8",label:"View Group Resources",icon:"far fa-copy"},on:{click:t.showResources}})],1)],1)],1),s("q-dialog",{attrs:{persistent:""},model:{value:t.resourcesDialogFlag,callback:function(e){t.resourcesDialogFlag=e},expression:"resourcesDialogFlag"}},[s("q-card",{staticStyle:{width:"500px","max-width":"80vw"}},[t._l(t.resourcesArray,(function(e,r){return s("q-card-section",{key:r,staticClass:"row justify-around"},[s("div",{staticClass:"column text-h10"},[t._v(t._s(e.name))]),s("div",{staticClass:"row q-gutter-sm"},[s("a",{attrs:{href:e.data,download:""}},[s("q-btn",{attrs:{round:"",color:"blue-10",icon:"fas fa-file-download",title:"download"}})],1),t.currentGroup.Created_By==t.$store.getters.getUserData.id?s("q-btn",{attrs:{round:"",color:"red-10",icon:"fas fa-times",title:"delete file"},on:{click:function(s){return t.deleteFile(e)}}}):t._e()],1)])})),s("q-card-actions",{staticClass:"text-primary",attrs:{align:"right"}},[s("q-btn",{attrs:{flat:"",label:"OK",color:"primary"},on:{click:function(e){t.resourcesDialogFlag=!1}}})],1)],2)],1)],1),s("div",{staticClass:"row justify-center q-gutter-md"},[s("div",{staticClass:"col-3 q-gutter-md"},[s("q-card",{staticClass:"my-card"},[s("q-card-section",[s("q-input",{attrs:{rounded:"",outlined:"",label:"Write Post"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submitPost(e)}},model:{value:t.postText,callback:function(e){t.postText=e},expression:"postText"}})],1),s("q-card-actions",{staticClass:"row justify-center"},[s("q-btn",{attrs:{color:"primary",label:"Submit"},on:{click:t.submitPost}})],1)],1)],1),t._l(t.MyPosts,(function(e,r){return s("div",{key:r,staticClass:"col-3 q-gutter-md"},[s("q-card",{staticClass:"my-card",class:{"bg-yellow-8":"Doctor"==e.user_id.User_Category}},[s("q-card-section",[s("div",{staticClass:"text-subtitle5"},[t._v(t._s(e.group_id.Name)+" "+t._s("Doctor"==e.user_id.User_Category?"Dr":""))]),t.UserID!==e.user_id._id?s("div",{staticClass:"text-subtitle1"},[t._v(t._s(e.user_id.First_Name?e.user_id.First_Name+" "+e.user_id.Last_Name:e.user_id.Email))]):s("div",{staticClass:"text-subtitle1"},[t._v("You")]),s("div",{staticClass:"text-h6"},[t._v(t._s(e.Message))])]),s("q-card-actions",{staticClass:"row justify-center"},[s("q-btn",{attrs:{round:"",color:"green",icon:"fas fa-comment-dots",title:"comment"},on:{click:function(s){return t.postClicked(e)}}}),t.UserID==e.user_id._id||"Doctor"==t.Role?s("q-btn",{attrs:{round:"",color:"red-10",icon:"far fa-trash-alt",title:"delete"},on:{click:function(s){return t.deletePost(e)}}}):t._e()],1)],1)],1)}))],2)])},o=[],c=(s("99af"),s("d3b7"),s("96cf"),s("c151")),i={name:"Groups",data:function(){return{confirm:!1,selectedGroup:{Name:"First"},postText:null,resourcesDialogFlag:!1,resourcesArray:[],currentGroup:null}},created:function(){var t=this.$store.getters.getCurrentGroup._id;this.currentGroup=this.$store.getters.getCurrentGroup,this.$store.dispatch("fetchGroupPosts",t),this.fetchResources(t)},methods:{SelectGroup:function(t){this.selectedGroup=t,this.confirm=!0},submitPost:function(){var t,e,s=this;return regeneratorRuntime.async((function(r){while(1)switch(r.prev=r.next){case 0:return t=this.$store.getters.getUserData.id,e=this.$store.getters.getCurrentGroup._id,r.next=4,regeneratorRuntime.awrap(Object(c["a"])().post("/posts/createPost/".concat(t,"/").concat(e),{Message:this.postText}).then((function(t){"success"==t.data.status&&(s.$q.notify({color:"teal",message:"Post Created Successfully",position:"top-right",timeout:1e3}),s.postText=null,s.$store.dispatch("fetchGroupPosts",e))})).catch((function(){s.$q.notify({color:"red-10",message:"Error Occured , Try Again",position:"top-right",timeout:1e3})})));case 4:case"end":return r.stop()}}),null,this)},deletePost:function(t){var e,s,r,o=this;return regeneratorRuntime.async((function(i){while(1)switch(i.prev=i.next){case 0:e=this.$store.getters.getUserData.id,s=t._id,r=this.$store.getters.getCurrentGroup._id,Object(c["a"])().put("/posts/deletePost/".concat(e,"/").concat(s)).then((function(t){"success"==t.data.status&&(o.$q.notify({color:"teal",message:"Post Deleted Successfully",position:"top-right",timeout:1e3}),o.$store.commit("clearGroupPosts"),o.$store.dispatch("fetchGroupPosts",r))})).catch((function(t){console.log(t),o.$q.notify({color:"red-10",message:"Error",position:"top-right",timeout:1e3})}));case 4:case"end":return i.stop()}}),null,this)},postClicked:function(t){this.$store.commit("clearCurrentPost"),this.$store.commit("setCurrentPost",t),this.$router.push("/replies"),this.$store.dispatch("fetchPostReplies")},showResources:function(){this.resourcesDialogFlag=!0},fetchResources:function(t){var e=this;Object(c["a"])().get("/resources/".concat(t)).then((function(t){"success"==t.data.status&&(e.resourcesArray=t.data.resource)})).catch((function(t){return console.log(t.response.data)}))},deleteFile:function(t){var e=this;console.log(t),Object(c["a"])().delete("/resources/".concat(t._id,"/groups/").concat(t.group_id)).then((function(s){"success"==s.data.status&&(e.$q.notify({color:"teal",message:"Resource Deleted Successfully",position:"top-right",timeout:1e3}),e.fetchResources(t.group_id))})).catch((function(t){e.$q.notify({color:"red-10",message:"Error Occured , Please Try Again",position:"top-right",timeout:1e3})}))}},computed:{MyPosts:function(){return this.$store.getters.getGroupPosts},Role:function(){return sessionStorage.getItem("role")},UserID:function(){return this.$store.getters.getUserData.id}},watch:{MyPosts:function(t,e){this.resourcesArray=[],this.fetchResources(this.$store.getters.getCurrentGroup._id)}}},a=i,n=s("2877"),u=Object(n["a"])(a,r,o,!1,null,null,null);e["default"]=u.exports}}]);
//# sourceMappingURL=chunk-2d0f1152.437ce2b8.js.map